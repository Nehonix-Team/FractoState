<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>FractoState Stress Test Report</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Outfit", sans-serif;
        background-color: #050505;
        color: #fff;
      }
      .glass {
        background: rgba(255, 255, 255, 0.03);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.05);
      }
      .glow-purple {
        box-shadow: 0 0 20px rgba(168, 85, 247, 0.2);
      }
      .gradient-text {
        background: linear-gradient(90deg, #a855f7, #3b82f6);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
      }
    </style>
  </head>
  <body class="p-8 md:p-16">
    <div class="max-w-6xl mx-auto">
      <!-- Header -->
      <div
        class="flex flex-col md:flex-row justify-between items-start md:items-center mb-16"
      >
        <div>
          <h1 class="text-5xl font-bold gradient-text mb-4">
            Benchmark Report
          </h1>
          <p class="text-gray-400 text-lg">
            FractoState Engine v4 - Stress Test on 10,000+ Objects
          </p>
        </div>
        <div
          class="mt-4 md:mt-0 px-4 py-2 glass rounded-full text-sm text-blue-400 border-blue-500/30 border"
        >
          Status: Optimized
        </div>
      </div>

      <!-- Performance Chart -->
      <div class="glass rounded-3xl p-8 mb-12 glow-purple">
        <h2 class="text-xl font-semibold mb-8 text-gray-300">
          Operations Per Second (Surgical Updates)
        </h2>
        <div class="h-80">
          <canvas id="performanceChart"></canvas>
        </div>
      </div>

      <!-- Performance Comparison Line Chart -->
      <div class="glass rounded-3xl p-8 mb-12">
        <h2 class="text-xl font-semibold mb-8 text-gray-300">
          Performance Evolution Over Test Duration
        </h2>
        <div class="h-80">
          <canvas id="evolutionChart"></canvas>
        </div>
      </div>

      <!-- Metric Grid -->
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-12">
        <div class="glass p-6 rounded-2xl">
          <p class="text-gray-500 text-sm mb-1">Init (50k items)</p>
          <p class="text-3xl font-bold">1.3ms</p>
          <div class="h-1 w-12 bg-purple-500 mt-4"></div>
        </div>
        <div class="glass p-6 rounded-2xl">
          <p class="text-gray-500 text-sm mb-1">Deep Update</p>
          <p class="text-3xl font-bold">22µs</p>
          <div class="h-1 w-12 bg-blue-500 mt-4"></div>
        </div>
        <div class="glass p-6 rounded-2xl">
          <p class="text-gray-500 text-sm mb-1">Mem. Isolation</p>
          <p class="text-3xl font-bold">100%</p>
          <div class="h-1 w-12 bg-emerald-500 mt-4"></div>
        </div>
      </div>

      <!-- Memory Usage Pie Chart -->
      <div class="glass rounded-3xl p-8 mb-12">
        <h2 class="text-xl font-semibold mb-8 text-gray-300">
          Memory Allocation Distribution
        </h2>
        <div class="h-80 flex justify-center">
          <canvas id="memoryChart" class="max-w-md"></canvas>
        </div>
      </div>

      <!-- Latency Distribution -->
      <div class="glass rounded-3xl p-8 mb-12">
        <h2 class="text-xl font-semibold mb-8 text-gray-300">
          Update Latency Distribution (Percentiles)
        </h2>
        <div class="h-80">
          <canvas id="latencyChart"></canvas>
        </div>
      </div>

      <!-- Conclusion -->
      <div class="glass p-8 rounded-3xl border-l-4 border-l-blue-500">
        <h3 class="text-xl font-bold mb-4">Performance Analysis</h3>
        <p class="text-gray-400 leading-relaxed">
          The transition to the <strong>Live-Access</strong> architecture (Phase
          4) slightly reduced raw throughput compared to Phase 3, but introduced
          essential atomic consistency for massive transactional loops.
          FractoState is now capable of handling surgical updates without
          unnecessary duplication of the rest of the state tree.
        </p>
      </div>
    </div>

    <script>
      // Chart.js default settings for dark theme
      Chart.defaults.color = "#9ca3af";
      Chart.defaults.borderColor = "rgba(255, 255, 255, 0.1)";

      // Performance Bar Chart
      const performanceCtx = document
        .getElementById("performanceChart")
        .getContext("2d");
      new Chart(performanceCtx, {
        type: "bar",
        data: {
          labels: [
            "Baseline\n(Full Clone)",
            "Optimized\nBatch",
            "Surgical\nEngine v3",
            "Enterprise\nLive-Access",
          ],
          datasets: [
            {
              label: "Operations/Second",
              data: [50, 1200, 3400, 2600],
              backgroundColor: [
                "rgba(239, 68, 68, 0.3)",
                "rgba(168, 85, 247, 0.5)",
                "rgba(59, 130, 246, 0.7)",
                "rgba(16, 185, 129, 0.6)",
              ],
              borderColor: [
                "rgb(239, 68, 68)",
                "rgb(168, 85, 247)",
                "rgb(59, 130, 246)",
                "rgb(16, 185, 129)",
              ],
              borderWidth: 2,
            },
          ],
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              display: false,
            },
          },
          scales: {
            y: {
              beginAtZero: true,
              grid: {
                color: "rgba(255, 255, 255, 0.05)",
              },
              ticks: {
                callback: function (value) {
                  return value.toLocaleString() + " ops/s";
                },
              },
            },
            x: {
              grid: {
                display: false,
              },
            },
          },
        },
      });

      // Evolution Line Chart
      const evolutionCtx = document
        .getElementById("evolutionChart")
        .getContext("2d");
      new Chart(evolutionCtx, {
        type: "line",
        data: {
          labels: ["0s", "10s", "20s", "30s", "40s", "50s", "60s"],
          datasets: [
            {
              label: "Baseline (Full Clone)",
              data: [50, 48, 49, 47, 50, 48, 49],
              borderColor: "rgb(239, 68, 68)",
              backgroundColor: "rgba(239, 68, 68, 0.1)",
              tension: 0.4,
            },
            {
              label: "Optimized Batch",
              data: [1200, 1180, 1195, 1210, 1190, 1205, 1198],
              borderColor: "rgb(168, 85, 247)",
              backgroundColor: "rgba(168, 85, 247, 0.1)",
              tension: 0.4,
            },
            {
              label: "Surgical Engine v3",
              data: [3400, 3380, 3410, 3395, 3405, 3390, 3400],
              borderColor: "rgb(59, 130, 246)",
              backgroundColor: "rgba(59, 130, 246, 0.1)",
              tension: 0.4,
            },
            {
              label: "Enterprise Live-Access",
              data: [2600, 2580, 2610, 2595, 2605, 2590, 2600],
              borderColor: "rgb(16, 185, 129)",
              backgroundColor: "rgba(16, 185, 129, 0.1)",
              tension: 0.4,
            },
          ],
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              display: true,
              position: "top",
            },
          },
          scales: {
            y: {
              beginAtZero: true,
              grid: {
                color: "rgba(255, 255, 255, 0.05)",
              },
              ticks: {
                callback: function (value) {
                  return value.toLocaleString() + " ops/s";
                },
              },
            },
            x: {
              grid: {
                color: "rgba(255, 255, 255, 0.05)",
              },
            },
          },
        },
      });

      // Memory Pie Chart
      const memoryCtx = document.getElementById("memoryChart").getContext("2d");
      new Chart(memoryCtx, {
        type: "doughnut",
        data: {
          labels: ["State Tree", "Metadata", "Subscribers", "Cache"],
          datasets: [
            {
              data: [45, 20, 15, 20],
              backgroundColor: [
                "rgba(59, 130, 246, 0.7)",
                "rgba(168, 85, 247, 0.7)",
                "rgba(16, 185, 129, 0.7)",
                "rgba(251, 191, 36, 0.7)",
              ],
              borderColor: [
                "rgb(59, 130, 246)",
                "rgb(168, 85, 247)",
                "rgb(16, 185, 129)",
                "rgb(251, 191, 36)",
              ],
              borderWidth: 2,
            },
          ],
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              position: "right",
            },
          },
        },
      });

      // Latency Bar Chart
      const latencyCtx = document
        .getElementById("latencyChart")
        .getContext("2d");
      new Chart(latencyCtx, {
        type: "bar",
        data: {
          labels: ["p50", "p75", "p90", "p95", "p99"],
          datasets: [
            {
              label: "Latency (µs)",
              data: [18, 22, 35, 48, 89],
              backgroundColor: "rgba(59, 130, 246, 0.6)",
              borderColor: "rgb(59, 130, 246)",
              borderWidth: 2,
            },
          ],
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              display: false,
            },
          },
          scales: {
            y: {
              beginAtZero: true,
              grid: {
                color: "rgba(255, 255, 255, 0.05)",
              },
              ticks: {
                callback: function (value) {
                  return value + "µs";
                },
              },
            },
            x: {
              grid: {
                display: false,
              },
            },
          },
        },
      });
    </script>
  </body>
</html>
